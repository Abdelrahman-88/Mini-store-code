{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./auth.service\";\nexport let CartService = /*#__PURE__*/(() => {\n  class CartService {\n    constructor(_HttpClient, _AuthService) {\n      this._HttpClient = _HttpClient;\n      this._AuthService = _AuthService;\n      this.url = 'https://ministore1.herokuapp.com/cart/';\n      this.cartData = new BehaviorSubject([]);\n\n      if (localStorage.getItem(\"cartData\") != null) {\n        this.getCartData();\n      }\n    }\n\n    saveCartData() {\n      localStorage.setItem(\"cartData\", JSON.stringify(this.cartData.value));\n    }\n\n    getCartData() {\n      this.cartData.next(JSON.parse(localStorage.getItem(\"cartData\")));\n    }\n\n    addCart(data) {\n      this.getToken();\n      return this._HttpClient.post(`${this.url}addCart/${this.id}`, data, {\n        headers: this.headers\n      });\n    }\n\n    getAllUserCart(status, size, page, sort) {\n      this.getToken();\n      return this._HttpClient.get(`${this.url}getAllUserCart/${this.id}/?page=${page}&size=${size}&status=${status}&sort=${sort}`, {\n        headers: this.headers\n      });\n    }\n\n    getCart(cartId) {\n      this.getToken();\n      return this._HttpClient.get(`${this.url}getCart/${cartId}`, {\n        headers: this.headers\n      });\n    }\n\n    getToken() {\n      if (localStorage.getItem(\"userToken\")) {\n        const token = localStorage.getItem(\"userToken\");\n        this.headers = {\n          'Authorization': `Bearer ${token}`\n        };\n\n        this._AuthService.userData.subscribe(res => {\n          this.id = res === null || res === void 0 ? void 0 : res._id;\n        });\n      }\n    }\n\n  }\n\n  CartService.ɵfac = function CartService_Factory(t) {\n    return new (t || CartService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthService));\n  };\n\n  CartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartService,\n    factory: CartService.ɵfac,\n    providedIn: 'root'\n  });\n  return CartService;\n})();","map":null,"metadata":{},"sourceType":"module"}