{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../currency.service\";\nimport * as i4 from \"../cart.service\";\nimport * as i5 from \"../dark-mode.service\";\nimport * as i6 from \"ngx-spinner\";\nimport * as i7 from \"ngx-toastr\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"ngx-owl-carousel-o\";\n\nconst _c0 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\n\nfunction ProductDetailsComponent_div_5_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 19);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_5_img_2_Template_img_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.changeImg($event, i_r6);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r5, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r2.product.name);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r2.active === i_r6));\n  }\n}\n\nfunction ProductDetailsComponent_div_5_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r3.src ? ctx_r3.src : ctx_r3.product == null ? null : ctx_r3.product.gallery[0], i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ProductDetailsComponent_div_5_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"img\", 22);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductDetailsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14);\n    i0.ɵɵtemplate(2, ProductDetailsComponent_div_5_img_2_Template, 1, 5, \"img\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtemplate(4, ProductDetailsComponent_div_5_div_4_Template, 2, 1, \"div\", 17);\n    i0.ɵɵtemplate(5, ProductDetailsComponent_div_5_div_5_Template, 2, 0, \"div\", 18);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.product == null ? null : ctx_r0.product.gallery);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.product == null ? null : ctx_r0.product.gallery == null ? null : ctx_r0.product.gallery.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r0.product == null ? null : ctx_r0.product.gallery == null ? null : ctx_r0.product.gallery.length));\n  }\n}\n\nfunction ProductDetailsComponent_owl_carousel_o_6_1_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 26);\n  }\n\n  if (rf & 2) {\n    const item_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", item_r10, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ProductDetailsComponent_owl_carousel_o_6_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ProductDetailsComponent_owl_carousel_o_6_1_ng_template_0_Template, 1, 1, \"ng-template\", 25);\n  }\n}\n\nfunction ProductDetailsComponent_owl_carousel_o_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"owl-carousel-o\", 23);\n    i0.ɵɵtemplate(1, ProductDetailsComponent_owl_carousel_o_6_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"options\", ctx_r1.customOptions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.product == null ? null : ctx_r1.product.gallery);\n  }\n}\n\nexport let ProductDetailsComponent = /*#__PURE__*/(() => {\n  class ProductDetailsComponent {\n    constructor(_ProductService, _ActivatedRoute, _Router, _CurrencyService, _CartService, _DarkModeService, spinner, toastr) {\n      this._ProductService = _ProductService;\n      this._ActivatedRoute = _ActivatedRoute;\n      this._Router = _Router;\n      this._CurrencyService = _CurrencyService;\n      this._CartService = _CartService;\n      this._DarkModeService = _DarkModeService;\n      this.spinner = spinner;\n      this.toastr = toastr;\n      this.customOptions = {\n        loop: true,\n        mouseDrag: true,\n        touchDrag: true,\n        pullDrag: false,\n        margin: 10,\n        dots: false,\n        navSpeed: 800,\n        navText: ['', ''],\n        nav: true,\n        autoplay: true,\n        autoplayHoverPause: true,\n        autoplayTimeout: 8000,\n        autoplaySpeed: 5000,\n        responsive: {\n          0: {\n            items: 1\n          },\n          400: {\n            items: 1\n          },\n          740: {\n            items: 1\n          },\n          940: {\n            items: 1\n          },\n          1440: {\n            items: 1\n          },\n          2640: {\n            items: 1\n          }\n        }\n      };\n      this.productId = '';\n      this.product = {};\n      this.error = '';\n      this.src = '';\n      this.active = 0;\n      this.owl = false;\n      this.darkMode = false;\n    }\n\n    ngAfterViewInit() {\n      window.dispatchEvent(new Event('resize'));\n    }\n\n    ngOnInit() {\n      this.productId = this._ActivatedRoute.snapshot.params['id'];\n      this.getProduct(this.productId);\n\n      this._CurrencyService.rate.subscribe(res => {\n        this.rate = res;\n      });\n\n      this._DarkModeService.darkMode.subscribe(res => {\n        this.darkMode = res;\n      });\n    }\n\n    onResize() {\n      var width = window.innerWidth;\n      this.owl = width < 1024;\n    }\n\n    getProduct(productId) {\n      this.spinner.show();\n\n      this._ProductService.getProduct(productId).subscribe({\n        next: response => {\n          if (response.message == 'done') {\n            this.product = response.product;\n            this.spinner.hide();\n          } else {\n            this.spinner.hide();\n            this.error = 'Faild to get product';\n\n            this._Router.navigate([\"/home\"]);\n\n            this.toastr.error(`${this.error}!`, \"\", {\n              positionClass: 'toast-bottom-right',\n              timeOut: 5000\n            });\n          }\n        },\n        error: error => {\n          this.spinner.hide();\n          this.error = 'Faild to get product';\n\n          this._Router.navigate([\"/home\"]);\n\n          this.toastr.error(`${this.error}!`, \"\", {\n            positionClass: 'toast-bottom-right',\n            timeOut: 5000\n          });\n        }\n      });\n    }\n\n    addToCart(product) {\n      let newCart = {\n        serviceId: product === null || product === void 0 ? void 0 : product._id,\n        quantity: 1,\n        name: product === null || product === void 0 ? void 0 : product.name,\n        price: product === null || product === void 0 ? void 0 : product.price,\n        total: product === null || product === void 0 ? void 0 : product.price,\n        poster: product === null || product === void 0 ? void 0 : product.poster\n      };\n\n      if (localStorage.getItem(\"cartData\") != null) {\n        let add = true;\n\n        this._CartService.getCartData();\n\n        this._CartService.cartData.value.find(cart => {\n          if (cart.serviceId == newCart.serviceId) {\n            add = false;\n            this.toastr.error(`Already added to cart`, \"\", {\n              positionClass: 'toast-bottom-right',\n              timeOut: 5000\n            });\n          }\n        });\n\n        if (add) {\n          this._CartService.cartData.next([...this._CartService.cartData.value, newCart]);\n\n          this.toastr.success(`Added to cart successfully`, \"\", {\n            positionClass: 'toast-bottom-right',\n            timeOut: 5000\n          });\n        }\n      } else {\n        this._CartService.cartData.next([newCart]);\n\n        this.toastr.success(`Added to cart successfully`, \"\", {\n          positionClass: 'toast-bottom-right',\n          timeOut: 5000\n        });\n      }\n\n      this._CartService.saveCartData();\n\n      this._CartService.getCartData();\n    }\n\n    changeImg(event, index) {\n      this.active = index;\n      this.src = event.target.src;\n    }\n\n  }\n\n  ProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n    return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CurrencyService), i0.ɵɵdirectiveInject(i4.CartService), i0.ɵɵdirectiveInject(i5.DarkModeService), i0.ɵɵdirectiveInject(i6.NgxSpinnerService), i0.ɵɵdirectiveInject(i7.ToastrService));\n  };\n\n  ProductDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductDetailsComponent,\n    selectors: [[\"app-product-details\"]],\n    hostBindings: function ProductDetailsComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function ProductDetailsComponent_resize_HostBindingHandler() {\n          return ctx.onResize();\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 22,\n    vars: 15,\n    consts: [[\"color\", \"#5ECE7B\", \"type\", \"ball-scale-multiple\"], [1, \"py-5\", \"mt-5\", 3, \"ngClass\"], [1, \"container\"], [1, \"row\", \"align-items-center\", \"justify-content-center\"], [1, \"col-lg-7\", \"text-center\"], [\"class\", \"row basic\", 4, \"ngIf\"], [\"class\", \"text-center option\", 3, \"options\", 4, \"ngIf\"], [1, \"col-lg-5\"], [1, \"p-3\"], [1, \"text-uppercase\"], [1, \"my-3\"], [1, \"btn\", \"border-0\", \"my-3\", 3, \"ngClass\", \"click\"], [1, \"mt-3\"], [1, \"row\", \"basic\"], [1, \"col-2\"], [\"class\", \"w-100 p-3 gallery mb-2 border\", 3, \"ngClass\", \"src\", \"alt\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-10\"], [\"class\", \"p-3 bg-white\", 4, \"ngIf\"], [\"class\", \"p-3\", 4, \"ngIf\"], [1, \"w-100\", \"p-3\", \"gallery\", \"mb-2\", \"border\", 3, \"ngClass\", \"src\", \"alt\", \"click\"], [1, \"p-3\", \"bg-white\"], [\"alt\", \"gallery\", 1, \"w-100\", \"gallery-main\", 3, \"src\"], [\"src\", \"assets/imgs/no-image.png\", \"alt\", \"no-image\", 1, \"w-100\"], [1, \"text-center\", \"option\", 3, \"options\"], [4, \"ngFor\", \"ngForOf\"], [\"carouselSlide\", \"\"], [\"alt\", \"gallery\", 1, \"img-fluid\", \"owl-gallery\", 3, \"src\"]],\n    template: function ProductDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"ngx-spinner\", 0);\n        i0.ɵɵelementStart(1, \"section\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵtemplate(5, ProductDetailsComponent_div_5_Template, 6, 3, \"div\", 5);\n        i0.ɵɵtemplate(6, ProductDetailsComponent_owl_carousel_o_6_Template, 2, 2, \"owl-carousel-o\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"h2\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"h1\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"h3\", 10);\n        i0.ɵɵtext(14);\n        i0.ɵɵpipe(15, \"number\");\n        i0.ɵɵpipe(16, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_17_listener() {\n          return ctx.addToCart(ctx.product);\n        });\n        i0.ɵɵelementStart(18, \"span\");\n        i0.ɵɵtext(19, \"ADD TO CART\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"p\", 12);\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"ngClass\", ctx.darkMode ? \"dark-mode-back dark-mode-color\" : \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.owl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.owl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.product == null ? null : ctx.product.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.product == null ? null : ctx.product.category);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\"Price: \", ctx.rate == null ? null : ctx.rate.sign, \" \", ctx.rate.code == \"jpy\" ? i0.ɵɵpipeBind2(15, 9, ctx.product.price * ctx.rate.rate, \"1.0-2\") : i0.ɵɵpipeBind2(16, 12, ctx.product.price * ctx.rate.rate, \"1.2-2\"), \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"ngClass\", ctx.darkMode ? \"btn-dark dark-mode-color-dark\" : \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.product == null ? null : ctx.product.description);\n      }\n    },\n    directives: [i6.NgxSpinnerComponent, i8.NgClass, i8.NgIf, i8.NgForOf, i9.CarouselComponent, i9.CarouselSlideDirective],\n    pipes: [i8.DecimalPipe],\n    styles: [\".dark-mode-back[_ngcontent-%COMP%]{background-color:#202124!important}.dark-mode-color[_ngcontent-%COMP%]{color:#fff!important}.btn-dark[_ngcontent-%COMP%]:after{background-color:#fff!important}.dark-mode-color-dark[_ngcontent-%COMP%]{color:#202124!important}.back-dark-mode[_ngcontent-%COMP%]:hover{background-color:#6e6e6e1a!important}.dark-active[_ngcontent-%COMP%]{background-color:#5ece7b!important;color:#202124!important;border-color:#fff!important}.dark-hover.page-link[_ngcontent-%COMP%]:hover{color:#202124!important}section[_ngcontent-%COMP%]{min-height:100vh}.btn[_ngcontent-%COMP%]{color:#fff;border:solid 1px #212529;position:relative;overflow:hidden;background-color:#5ece7b}.btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{z-index:2;position:relative}.btn[_ngcontent-%COMP%]:after{content:\\\"\\\";width:200%;height:200%;top:0;left:50%;background-color:#212529;z-index:1;position:absolute;transform:skew(-90deg);transition:transform .5s,left .5s,top .5s}.btn[_ngcontent-%COMP%]:hover:after{left:-5%;top:-5%;transform:skew(0)}.gallery[_ngcontent-%COMP%]{cursor:pointer;transition:box-shadow .5s;object-fit:contain;background-color:#fff}.gallery-main[_ngcontent-%COMP%]{height:500px;object-fit:contain;background-color:#fff}.gallery[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%]{box-shadow:0 .5rem 1.5rem #00000026!important;border:none!important}.owl-gallery[_ngcontent-%COMP%]{height:300px;object-fit:contain}\"]\n  });\n  return ProductDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}